<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <ui:composition>
            <script type="text/javascript">
                document.title = "ChessClan - Turnieje";
            </script>
            <c:forEach items="#{ctBean.clubTournaments}" var="tmt" varStatus="loop">
                <h:panelGroup layout="block"  styleClass='#{loop.index%2==1?"tmtContainer right":"tmtContainer left"}'>
                    #{tmt.name} <a href="#{request.contextPath}/tournaments/#{tmt.id}">Wyświetl szczegółowy widok</a><br/>
                    Data: <h:outputText value="#{tmt.date}"><f:convertDateTime pattern="dd-MM-yyyy"/></h:outputText><br/>
                    Opis: #{tmt.description}<br/>
                    Liczba rund: #{tmt.numberOfRounds}<br/>
                    Punkty uzyskiwane za wygraną partię: <h:outputText value="#{tmt.pointsForBye}"><f:convertNumber pattern="0"/></h:outputText><br/>
                        Punkty uzyskiwane za zremisowanie partii: <h:outputText value="#{tmt.pointsForBye/2}"></h:outputText><br/>
                    <h:commandButton rendered="#{tmt.state == 'NOT_STARTED'}" value="Rozpocznij prowadzenie turnieju" styleClass="allButton2">
                        <f:ajax render="@form" listener="#{cTmtCBean.loadTmt(tmt)}"/>
                    </h:commandButton>
                    <h:commandButton rendered="#{tmt.state == 'STARTED'}" value="Kontynuuj prowadzenie turnieju" styleClass="allButton2">
                        <f:ajax render="@form" listener="#{cTmtCBean.loadTmt(tmt)}"/>
                    </h:commandButton>
                    <h:commandButton rendered="#{tmt.state == 'FINISHED'}" value="Pokaż wyniki turnieju" styleClass="allButton2">
                        <f:ajax render="@form" listener="#{cTmtCBean.loadTmt(tmt)}"/>
                    </h:commandButton>
                    <h:commandButton value="Usuń turniej" styleClass="allButton2">
                        <f:ajax render="@form" listener="#{ctBean.removeTmt(tmt)}"/>
                    </h:commandButton>
                </h:panelGroup>
            </c:forEach>
        </ui:composition>
    </h:body>
</html>
